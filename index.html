<!DOCTYPE html>
<!-- Estructura b√°sica de un documento HTML para el juego de b√©isbol tiradados -->
<html lang="es">

<head>
    <meta charset="UTF-8">
    <!-- Hace que el dise√±o sea adaptable en m√≥viles -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Juego de B√©isbol Tiradados</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

    <!-- Enlace a los estilos CSS personalizados -->
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- Contenedor principal del juego -->
    <div id="app">
        <!-- Contenedor del marcador arriba -->
        <div class="marcador-container">
            <div class="marcador-wrapper">
                <table class="marcador-table">
                    <thead>
                        <tr>
                            <th>Equipo</th>
                            <th>1</th>
                            <th>2</th>
                            <th>3</th>
                            <th>4</th>
                            <th>5</th>
                            <th>6</th>
                            <th>7</th>
                            <th>8</th>
                            <th>9</th>
                            <th>R</th>
                            <th>H</th>
                            <th>E</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="team-name">Visitante</td>
                            <td class="inning-score">0</td>
                            <td class="inning-score">0</td>
                            <td class="inning-score">0</td>
                            <td class="inning-score">0</td>
                            <td class="inning-score">0</td>
                            <td class="inning-score">0</td>
                            <td class="inning-score">0</td>
                            <td class="inning-score">0</td>
                            <td class="inning-score">0</td>
                            <td class="total-runs">0</td>
                            <td class="total-hits">0</td>
                            <td class="total-errors">0</td>
                        </tr>
                        <tr>
                            <td class="team-name">Local</td>
                            <td class="inning-score">0</td>
                            <td class="inning-score">0</td>
                            <td class="inning-score">0</td>
                            <td class="inning-score">0</td>
                            <td class="inning-score">0</td>
                            <td class="inning-score">0</td>
                            <td class="inning-score">0</td>
                            <td class="inning-score">0</td>
                            <td class="inning-score">0</td>
                            <td class="total-runs">0</td>
                            <td class="total-hits">0</td>
                            <td class="total-errors">0</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="marcador-button-container">
                <!-- El bot√≥n se mover√° aqu√≠ din√°micamente -->
            </div>
        </div>

        <!-- Estructura de dos columnas laterales para los equipos -->
        <div class="dashboard">
            <!-- Columna izquierda: Equipo visitante -->
            <div class="col col-visitante">
                <div class="team-header">
                    <h2>üõ´ Equipo Visitante</h2>
                    <button class="config-btn" onclick="openTeamConfig('visitante')">‚öôÔ∏è</button>
                </div>

                <!-- Tabla de roster del equipo visitante -->
                <div class="roster-container">
                    <table class="roster-table" id="roster-visitante">
                        <thead>
                            <tr>
                                <th>Handle</th>
                                <th>#</th>
                                <th>Foto</th>
                                <th>Nombre</th>
                                <th>Posici√≥n</th>
                                <th>Mano</th>
                                <th>AVG</th>
                                <th>OBP</th>
                                <th>Traits</th>
                                <th>Estado</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="player-row" draggable="true" data-player-id="1">
                                <td class="drag-handle">‚ãÆ‚ãÆ</td>
                                <td class="player-number">1</td>
                                <td class="player-photo">üì∑</td>
                                <td class="player-name">Jugador 1</td>
                                <td>
                                    <select class="position-select" data-player="1">
                                        <option value="P" selected>P</option>
                                        <option value="C">C</option>
                                        <option value="1B">1B</option>
                                        <option value="2B">2B</option>
                                        <option value="3B">3B</option>
                                        <option value="SS">SS</option>
                                        <option value="LF">LF</option>
                                        <option value="CF">CF</option>
                                        <option value="RF">RF</option>
                                        <option value="DH">DH</option>
                                    </select>
                                </td>
                                <td class="handedness">R</td>
                                <td class="batting-avg">.285</td>
                                <td class="on-base-pct">.340</td>
                                <td><span class="trait-tag trait-pwr">PWR</span></td>
                                <td class="game-status">‚öæ</td>
                            </tr>
                            <tr class="player-row" draggable="true" data-player-id="2">
                                <td class="drag-handle">‚ãÆ‚ãÆ</td>
                                <td class="player-number">2</td>
                                <td class="player-photo">üì∑</td>
                                <td class="player-name">Jugador 2</td>
                                <td>
                                    <select class="position-select" data-player="2">
                                        <option value="P">P</option>
                                        <option value="C" selected>C</option>
                                        <option value="1B">1B</option>
                                        <option value="2B">2B</option>
                                        <option value="3B">3B</option>
                                        <option value="SS">SS</option>
                                        <option value="LF">LF</option>
                                        <option value="CF">CF</option>
                                        <option value="RF">RF</option>
                                        <option value="DH">DH</option>
                                    </select>
                                </td>
                                <td class="handedness">R</td>
                                <td class="batting-avg">.275</td>
                                <td class="on-base-pct">.330</td>
                                <td><span class="trait-tag trait-def">DEF</span></td>
                                <td class="game-status">-</td>
                            </tr>
                            <tr class="player-row" draggable="true" data-player-id="3">
                                <td class="drag-handle">‚ãÆ‚ãÆ</td>
                                <td class="player-number">3</td>
                                <td class="player-photo">üì∑</td>
                                <td class="player-name">Jugador 3</td>
                                <td>
                                    <select class="position-select" data-player="3">
                                        <option value="P">P</option>
                                        <option value="C">C</option>
                                        <option value="1B" selected>1B</option>
                                        <option value="2B">2B</option>
                                        <option value="3B">3B</option>
                                        <option value="SS">SS</option>
                                        <option value="LF">LF</option>
                                        <option value="CF">CF</option>
                                        <option value="RF">RF</option>
                                        <option value="DH">DH</option>
                                    </select>
                                </td>
                                <td class="handedness">L</td>
                                <td class="batting-avg">.310</td>
                                <td class="on-base-pct">.380</td>
                                <td><span class="trait-tag trait-spd">SPD</span></td>
                                <td class="game-status">-</td>
                            </tr>
                            <tr class="player-row" draggable="true" data-player-id="4">
                                <td class="drag-handle">‚ãÆ‚ãÆ</td>
                                <td class="player-number">4</td>
                                <td class="player-photo">üì∑</td>
                                <td class="player-name">Jugador 4</td>
                                <td>
                                    <select class="position-select" data-player="4">
                                        <option value="P">P</option>
                                        <option value="C">C</option>
                                        <option value="1B">1B</option>
                                        <option value="2B" selected>2B</option>
                                        <option value="3B">3B</option>
                                        <option value="SS">SS</option>
                                        <option value="LF">LF</option>
                                        <option value="CF">CF</option>
                                        <option value="RF">RF</option>
                                        <option value="DH">DH</option>
                                    </select>
                                </td>
                                <td class="handedness">R</td>
                                <td class="batting-avg">.265</td>
                                <td class="on-base-pct">.315</td>
                                <td><span class="trait-tag trait-con">CON</span></td>
                                <td class="game-status">-</td>
                            </tr>
                            <tr class="player-row" draggable="true" data-player-id="5">
                                <td class="drag-handle">‚ãÆ‚ãÆ</td>
                                <td class="player-number">5</td>
                                <td class="player-photo">üì∑</td>
                                <td class="player-name">Jugador 5</td>
                                <td>
                                    <select class="position-select" data-player="5">
                                        <option value="P">P</option>
                                        <option value="C">C</option>
                                        <option value="1B">1B</option>
                                        <option value="2B">2B</option>
                                        <option value="3B" selected>3B</option>
                                        <option value="SS">SS</option>
                                        <option value="LF">LF</option>
                                        <option value="CF">CF</option>
                                        <option value="RF">RF</option>
                                        <option value="DH">DH</option>
                                    </select>
                                </td>
                                <td class="handedness">R</td>
                                <td class="batting-avg">.290</td>
                                <td class="on-base-pct">.350</td>
                                <td><span class="trait-tag trait-pwr">PWR</span></td>
                                <td class="game-status">-</td>
                            </tr>
                            <tr class="player-row" draggable="true" data-player-id="6">
                                <td class="drag-handle">‚ãÆ‚ãÆ</td>
                                <td class="player-number">6</td>
                                <td class="player-photo">üì∑</td>
                                <td class="player-name">Jugador 6</td>
                                <td>
                                    <select class="position-select" data-player="6">
                                        <option value="P">P</option>
                                        <option value="C">C</option>
                                        <option value="1B">1B</option>
                                        <option value="2B">2B</option>
                                        <option value="3B">3B</option>
                                        <option value="SS" selected>SS</option>
                                        <option value="LF">LF</option>
                                        <option value="CF">CF</option>
                                        <option value="RF">RF</option>
                                        <option value="DH">DH</option>
                                    </select>
                                </td>
                                <td class="handedness">L</td>
                                <td class="batting-avg">.255</td>
                                <td class="on-base-pct">.310</td>
                                <td><span class="trait-tag trait-def">DEF</span></td>
                                <td class="game-status">-</td>
                            </tr>
                            <tr class="player-row" draggable="true" data-player-id="7">
                                <td class="drag-handle">‚ãÆ‚ãÆ</td>
                                <td class="player-number">7</td>
                                <td class="player-photo">üì∑</td>
                                <td class="player-name">Jugador 7</td>
                                <td>
                                    <select class="position-select" data-player="7">
                                        <option value="P">P</option>
                                        <option value="C">C</option>
                                        <option value="1B">1B</option>
                                        <option value="2B">2B</option>
                                        <option value="3B">3B</option>
                                        <option value="SS">SS</option>
                                        <option value="LF" selected>LF</option>
                                        <option value="CF">CF</option>
                                        <option value="RF">RF</option>
                                        <option value="DH">DH</option>
                                    </select>
                                </td>
                                <td class="handedness">L</td>
                                <td class="batting-avg">.280</td>
                                <td class="on-base-pct">.340</td>
                                <td><span class="trait-tag trait-spd">SPD</span></td>
                                <td class="game-status">-</td>
                            </tr>
                            <tr class="player-row" draggable="true" data-player-id="8">
                                <td class="drag-handle">‚ãÆ‚ãÆ</td>
                                <td class="player-number">8</td>
                                <td class="player-photo">üì∑</td>
                                <td class="player-name">Jugador 8</td>
                                <td>
                                    <select class="position-select" data-player="8">
                                        <option value="P">P</option>
                                        <option value="C">C</option>
                                        <option value="1B">1B</option>
                                        <option value="2B">2B</option>
                                        <option value="3B">3B</option>
                                        <option value="SS">SS</option>
                                        <option value="LF">LF</option>
                                        <option value="CF" selected>CF</option>
                                        <option value="RF">RF</option>
                                        <option value="DH">DH</option>
                                    </select>
                                </td>
                                <td class="handedness">R</td>
                                <td class="batting-avg">.295</td>
                                <td class="on-base-pct">.360</td>
                                <td><span class="trait-tag trait-con">CON</span></td>
                                <td class="game-status">-</td>
                            </tr>
                            <tr class="player-row" draggable="true" data-player-id="9">
                                <td class="drag-handle">‚ãÆ‚ãÆ</td>
                                <td class="player-number">9</td>
                                <td class="player-photo">üì∑</td>
                                <td class="player-name">Jugador 9</td>
                                <td>
                                    <select class="position-select" data-player="9">
                                        <option value="P">P</option>
                                        <option value="C">C</option>
                                        <option value="1B">1B</option>
                                        <option value="2B">2B</option>
                                        <option value="3B">3B</option>
                                        <option value="SS">SS</option>
                                        <option value="LF">LF</option>
                                        <option value="CF">CF</option>
                                        <option value="RF" selected>RF</option>
                                        <option value="DH">DH</option>
                                    </select>
                                </td>
                                <td class="handedness">R</td>
                                <td class="batting-avg">.270</td>
                                <td class="on-base-pct">.325</td>
                                <td><span class="trait-tag trait-pwr">PWR</span></td>
                                <td class="game-status">-</td>
                            </tr>
                            <tr class="player-row" draggable="true" data-player-id="10">
                                <td class="drag-handle">‚ãÆ‚ãÆ</td>
                                <td class="player-number">10</td>
                                <td class="player-photo">üì∑</td>
                                <td class="player-name">Jugador 10</td>
                                <td>
                                    <select class="position-select" data-player="10">
                                        <option value="P">P</option>
                                        <option value="C">C</option>
                                        <option value="1B">1B</option>
                                        <option value="2B">2B</option>
                                        <option value="3B">3B</option>
                                        <option value="SS">SS</option>
                                        <option value="LF">LF</option>
                                        <option value="CF">CF</option>
                                        <option value="RF">RF</option>
                                        <option value="DH" selected>DH</option>
                                    </select>
                                </td>
                                <td class="handedness">L</td>
                                <td class="batting-avg">.305</td>
                                <td class="on-base-pct">.375</td>
                                <td><span class="trait-tag trait-clu">CLU</span></td>
                                <td class="game-status">-</td>
                            </tr>
                            <tr class="player-row" draggable="true" data-player-id="11">
                                <td class="drag-handle">‚ãÆ‚ãÆ</td>
                                <td class="player-number">11</td>
                                <td class="player-photo">üì∑</td>
                                <td class="player-name">Pitcher Alt</td>
                                <td>
                                    <select class="position-select" data-player="11">
                                        <option value="P" selected>P</option>
                                        <option value="C">C</option>
                                        <option value="1B">1B</option>
                                        <option value="2B">2B</option>
                                        <option value="3B">3B</option>
                                        <option value="SS">SS</option>
                                        <option value="LF">LF</option>
                                        <option value="CF">CF</option>
                                        <option value="RF">RF</option>
                                        <option value="DH">DH</option>
                                    </select>
                                </td>
                                <td class="handedness">R</td>
                                <td class="batting-avg">.180</td>
                                <td class="on-base-pct">.220</td>
                                <td><span class="trait-tag trait-pit">PIT</span></td>
                                <td class="game-status">-</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- CONTENEDOR DE DADOS CON OVERLAY DE INTENCIONES -->
                <div class="dice-layers-container" style="position: relative;">
                    <!-- CAPA SUPERIOR: SELECTOR DE INTENCIONES DEL BATEADOR (OVERLAY) -->
                    <div id="intention-container-visitante" class="dynamic-dice-container intention-selector card shadow-lg mb-4" style="display: block; opacity: 1;">
                        <div class="card-body">
                            <div class="text-center mb-3">
                                <h5 class="card-title text-white mb-1">
                                    <i class="fas fa-bullseye me-2"></i>üéØ ¬øCu√°l es tu intenci√≥n?
                                </h5>
                                <p class="card-text text-white-50 mb-0">Selecciona la estrategia del bateador</p>
                            </div>
                            <div class="row g-3">
                                <div class="col-6">
                                    <button class="btn intention-btn normal-hit w-100 py-3" onclick="selectIntention('normal')" id="intention-normal">
                                        <div class="d-flex flex-column align-items-center">
                                            <span class="fs-4 mb-1">‚öæ</span>
                                            <span class="fw-bold">Batear Normal</span>
                                        </div>
                                    </button>
                                </div>
                                <div class="col-6">
                                    <button class="btn intention-btn steal-base w-100 py-3" onclick="selectIntention('steal')" id="intention-steal">
                                        <div class="d-flex flex-column align-items-center">
                                            <span class="fs-4 mb-1">üèÉ‚Äç‚ôÇÔ∏è</span>
                                            <span class="fw-bold">Robar Base</span>
                                        </div>
                                    </button>
                                </div>
                                <div class="col-6">
                                    <button class="btn intention-btn bunt w-100 py-3" onclick="selectIntention('bunt')" id="intention-bunt">
                                        <div class="d-flex flex-column align-items-center">
                                            <span class="fs-4 mb-1">ü§è</span>
                                            <span class="fw-bold">Toque/Bunt</span>
                                        </div>
                                    </button>
                                </div>
                                <div class="col-6">
                                    <button class="btn intention-btn hit-run w-100 py-3" onclick="selectIntention('hitrun')" id="intention-hitrun">
                                        <div class="d-flex flex-column align-items-center">
                                            <span class="fs-4 mb-1">‚ö°</span>
                                            <span class="fw-bold">Hit & Run</span>
                                        </div>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- CAPA INFERIOR: Contenedor din√°mico para sistema de dados -->
                    <div id="dice-container-visitante" class="dynamic-dice-container" style="display: none;">
                        <div class="dice-system">
                            <div class="dice-action-area">
                                <div class="current-batter-info" id="current-batter-info">
                                    <span class="batter-name">Bateador Actual</span>
                                    <span class="batter-stats">AVG: .000</span>
                                </div>
                                <div class="dice-controls">
                                    <!-- Dados visuales lado a lado -->
                                    <div class="dice-display">
                                        <div class="dice-item">
                                            <div class="dice-label">LANZADOR</div>
                                            <div class="dice-visual" id="pitcher-dice">
                                                <select class="dice-type-selector" id="pitcher-dice-type" onchange="updatePitcherDiceRange('visitante')">
                                                <option value="20">D20</option>
                                                <option value="12" selected>D12</option>
                                                <option value="8">D8</option>
                                                <option value="4">D4</option>
                                                <option value="-4">-D4</option>
                                                <option value="-8">-D8</option>
                                                <option value="-12">-D12</option>
                                                <option value="-20">-D20</option>
                                            </select>
                                                <input type="number" class="dice-value-input" id="pitcher-dice-value" placeholder="-" min="-20" max="20">
                                                <div class="mini-dice" onclick="rollPitcherDice('visitante')" title="Tirar dado del lanzador">üé≤</div>
                                            </div>
                                        </div>
                                        <div class="dice-operator">+</div>
                                        <div class="dice-item">
                                            <div class="dice-label">BATEADOR</div>
                                            <div class="dice-visual" id="batter-dice">
                                                <span class="dice-type">D100</span>
                                                <input type="number" class="dice-value-input" id="batter-dice-value" placeholder="-" min="1" max="100">
                                                <div class="mini-dice" onclick="rollBatterDice('visitante')" title="Tirar dado del bateador">üé≤</div>
                                            </div>
                                        </div>
                                        <div class="dice-operator">=</div>
                                        <div class="dice-item result">
                                            <div class="dice-label">RESULTADO</div>
                                            <div class="dice-visual result" id="total-result">
                                                <span class="dice-value" id="final-result">-</span>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="result-section">
                                        <div class="result-description" id="result-description">
                                            Esperando tirada...
                                        </div>

                                        <div class="result-confirmation" id="result-confirmation" style="display: none;">
                                            <button class="confirm-result-btn" onclick="confirmResult('visitante')" id="confirm-btn">
                                            ‚úì Confirmar Resultado
                                        </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                <!-- Cierre del dice-layers-container -->
            </div>

            <!-- Columna central: terreno de juego y sistema de dados -->
            <div class="col col-central">
                <!-- Bot√≥n de iniciar juego encima del estadio -->
                <div class="start-game-container">
                    <button id="start-game-btn" class="start-game-btn" onclick="startNewGame()">
                        üéÆ Iniciar Nuevo Juego
                    </button>
                </div>

                <!-- ===== SISTEMA DE TOKENS VISUALES EN EL DIAMANTE ===== -->
                <!-- 
                    PROP√ìSITO: Mostrar visualmente los corredores en las bases sobre el diamante
                    FUNCIONALIDAD: Tokens se mueven con animaciones entre bases seg√∫n las jugadas
                    INTEGRACI√ìN: Sincronizado con gameState.bases para mostrar estado actual
                    RESPONSIVE: Se adapta al tama√±o de la imagen del estadio
                -->
                <div class="diamond-container">
                    <img src="zelaia.jpg" alt="Terreno de juego de b√©isbol" class="terreno-img">

                    <!-- Capa superpuesta para tokens de corredores -->
                    <div class="diamond-tokens-layer">
                        <!-- Posiciones fijas de las bases para referencia -->
                        <div class="base-marker" data-base="home" title="Home Plate"></div>
                        <div class="base-marker" data-base="first" title="Primera Base"></div>
                        <div class="base-marker" data-base="second" title="Segunda Base"></div>
                        <div class="base-marker" data-base="third" title="Tercera Base"></div>

                        <!-- Los tokens de corredores se a√±adir√°n din√°micamente aqu√≠ -->
                        <div id="runners-container" class="runners-container">
                            <!-- Los tokens de jugadores aparecer√°n aqu√≠ mediante JavaScript -->
                        </div>
                    </div>
                </div>

                <!-- Controles del juego (solo bot√≥n de reiniciar) -->
                <div class="game-controls">
                    <button id="reset-game-btn" class="reset-game-btn" onclick="resetGame()" style="display: none;">
                        üîÑ Reiniciar Juego
                    </button>
                </div>

                <!-- ===== BOTONES TEMPORALES DE PRUEBA ===== -->
                <!-- NOTA: Estos botones se pueden remover en la versi√≥n final -->
                <div class="debug-controls" style="text-align: center; margin: 10px 0; padding: 10px; background: rgba(0,0,0,0.05); border-radius: 8px;">
                    <small style="display: block; margin-bottom: 8px; color: #666; font-style: italic;">üß™ Controles de Desarrollo (temporales)</small>

                    <button onclick="showIntentionSelector()" style="background: #059669; color: white; padding: 0.4rem 0.8rem; margin: 0.2rem; border: none; border-radius: 4px; font-size: 0.85rem;">
                        üîß Mostrar Selector
                    </button>

                    <button onclick="testStealSystem()" style="background: #dc2626; color: white; padding: 0.4rem 0.8rem; margin: 0.2rem; border: none; border-radius: 4px; font-size: 0.85rem;">
                        üèÉ‚Äç‚ôÇÔ∏è Test Robo
                    </button>

                    <button onclick="testTokenSystem()" style="background: #7c3aed; color: white; padding: 0.4rem 0.8rem; margin: 0.2rem; border: none; border-radius: 4px; font-size: 0.85rem;">
                        üíé Test Tokens
                    </button>

                    <button onclick="testValidationSystem()" style="background: #f59e0b; color: white; padding: 0.4rem 0.8rem; margin: 0.2rem; border: none; border-radius: 4px; font-size: 0.85rem;">
                        üîí Test Validaci√≥n
                    </button>

                    <button onclick="toggleBasePositionDebug()" style="background: #ef4444; color: white; padding: 0.4rem 0.8rem; margin: 0.2rem; border: none; border-radius: 4px; font-size: 0.85rem;">
                        üéØ Posicionar Bases
                    </button>
                </div>

                <!-- Sistema de Cascada de Resoluci√≥n -->
                <div class="cascade-system" id="cascade-system" style="display: block;">
                    <div class="cascade-header">
                        <h3>üé≤ Resoluci√≥n de Jugada</h3>
                        <div class="cascade-status">
                            <span id="cascade-current-action">Sistema activo - Esperando tirada...</span>
                        </div>
                    </div>

                    <div class="cascade-flow" id="cascade-flow">
                        <!-- Aqu√≠ se generar√°n las casillas de cascada din√°micamente -->
                        <div class="cascade-step" id="cascade-step-1">
                            <div class="cascade-result">
                                <div class="result-label">Resultado Inicial</div>
                                <div class="result-value" id="initial-result">-</div>
                            </div>
                            <div class="cascade-dropdown" id="cascade-dropdown-1" style="display: none;">
                                <!-- Opciones se cargar√°n din√°micamente -->
                            </div>
                        </div>
                    </div>

                    <!-- Bot√≥n de confirmaci√≥n para siguiente bateador - SIEMPRE VISIBLE PARA PRUEBAS -->
                    <div class="cascade-confirmation" id="cascade-confirmation" style="display: block; background: rgba(0,100,0,0.3); padding: 1rem; border-radius: 8px; margin-top: 1rem;">
                        <div class="confirmation-message">
                            <span id="confirmation-text">üß™ MODO PRUEBAS - Bot√≥n siempre visible</span>
                        </div>
                        <button class="next-batter-btn" id="next-batter-btn" onclick="confirmAndNextBatter()" style="background: #059669; color: white; padding: 0.8rem 1.5rem; border: none; border-radius: 6px; cursor: pointer; font-weight: bold;">
                            ‚öæ Siguiente Bateador
                        </button>
                    </div>
                </div>
            </div>

            <!-- Columna derecha: Equipo local -->
            <div class="col col-local">
                <div class="team-header">
                    <h2>üè† Equipo Local</h2>
                    <button class="config-btn" onclick="openTeamConfig('local')">‚öôÔ∏è</button>
                </div>

                <!-- Tabla de roster del equipo local -->
                <div class="roster-container">
                    <table class="roster-table" id="roster-local">
                        <thead>
                            <tr>
                                <th>Handle</th>
                                <th>#</th>
                                <th>Foto</th>
                                <th>Nombre</th>
                                <th>Posici√≥n</th>
                                <th>Mano</th>
                                <th>AVG</th>
                                <th>OBP</th>
                                <th>Traits</th>
                                <th>Estado</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="player-row" draggable="true" data-player-id="l1">
                                <td class="drag-handle">‚ãÆ‚ãÆ</td>
                                <td class="player-number">1</td>
                                <td class="player-photo">üì∑</td>
                                <td class="player-name">Jugador L1</td>
                                <td>
                                    <select class="position-select" data-player="l1">
                                        <option value="P" selected>P</option>
                                        <option value="C">C</option>
                                        <option value="1B">1B</option>
                                        <option value="2B">2B</option>
                                        <option value="3B">3B</option>
                                        <option value="SS">SS</option>
                                        <option value="LF">LF</option>
                                        <option value="CF">CF</option>
                                        <option value="RF">RF</option>
                                        <option value="DH">DH</option>
                                    </select>
                                </td>
                                <td class="handedness">L</td>
                                <td class="batting-avg">.265</td>
                                <td class="on-base-pct">.320</td>
                                <td><span class="trait-tag trait-ace">ACE</span></td>
                                <td class="game-status">-</td>
                            </tr>
                            <tr class="player-row" draggable="true" data-player-id="l2">
                                <td class="drag-handle">‚ãÆ‚ãÆ</td>
                                <td class="player-number">2</td>
                                <td class="player-photo">üì∑</td>
                                <td class="player-name">Jugador L2</td>
                                <td>
                                    <select class="position-select" data-player="l2">
                                        <option value="P">P</option>
                                        <option value="C" selected>C</option>
                                        <option value="1B">1B</option>
                                        <option value="2B">2B</option>
                                        <option value="3B">3B</option>
                                        <option value="SS">SS</option>
                                        <option value="LF">LF</option>
                                        <option value="CF">CF</option>
                                        <option value="RF">RF</option>
                                        <option value="DH">DH</option>
                                    </select>
                                </td>
                                <td class="handedness">R</td>
                                <td class="batting-avg">.280</td>
                                <td class="on-base-pct">.335</td>
                                <td><span class="trait-tag trait-def">DEF</span></td>
                                <td class="game-status">-</td>
                            </tr>
                            <tr class="player-row" draggable="true" data-player-id="l3">
                                <td class="drag-handle">‚ãÆ‚ãÆ</td>
                                <td class="player-number">3</td>
                                <td class="player-photo">üì∑</td>
                                <td class="player-name">Jugador L3</td>
                                <td>
                                    <select class="position-select" data-player="l3">
                                        <option value="P">P</option>
                                        <option value="C">C</option>
                                        <option value="1B" selected>1B</option>
                                        <option value="2B">2B</option>
                                        <option value="3B">3B</option>
                                        <option value="SS">SS</option>
                                        <option value="LF">LF</option>
                                        <option value="CF">CF</option>
                                        <option value="RF">RF</option>
                                        <option value="DH">DH</option>
                                    </select>
                                </td>
                                <td class="handedness">R</td>
                                <td class="batting-avg">.285</td>
                                <td class="on-base-pct">.345</td>
                                <td><span class="trait-tag trait-pwr">PWR</span></td>
                                <td class="game-status">-</td>
                            </tr>
                            <tr class="player-row" draggable="true" data-player-id="l4">
                                <td class="drag-handle">‚ãÆ‚ãÆ</td>
                                <td class="player-number">4</td>
                                <td class="player-photo">üì∑</td>
                                <td class="player-name">Jugador L4</td>
                                <td>
                                    <select class="position-select" data-player="l4">
                                        <option value="P">P</option>
                                        <option value="C">C</option>
                                        <option value="1B">1B</option>
                                        <option value="2B" selected>2B</option>
                                        <option value="3B">3B</option>
                                        <option value="SS">SS</option>
                                        <option value="LF">LF</option>
                                        <option value="CF">CF</option>
                                        <option value="RF">RF</option>
                                        <option value="DH">DH</option>
                                    </select>
                                </td>
                                <td class="handedness">L</td>
                                <td class="batting-avg">.275</td>
                                <td class="on-base-pct">.330</td>
                                <td><span class="trait-tag trait-spd">SPD</span></td>
                                <td class="game-status">-</td>
                            </tr>
                            <tr class="player-row" draggable="true" data-player-id="l5">
                                <td class="drag-handle">‚ãÆ‚ãÆ</td>
                                <td class="player-number">5</td>
                                <td class="player-photo">üì∑</td>
                                <td class="player-name">Jugador L5</td>
                                <td>
                                    <select class="position-select" data-player="l5">
                                        <option value="P">P</option>
                                        <option value="C">C</option>
                                        <option value="1B">1B</option>
                                        <option value="2B">2B</option>
                                        <option value="3B" selected>3B</option>
                                        <option value="SS">SS</option>
                                        <option value="LF">LF</option>
                                        <option value="CF">CF</option>
                                        <option value="RF">RF</option>
                                        <option value="DH">DH</option>
                                    </select>
                                </td>
                                <td class="handedness">R</td>
                                <td class="batting-avg">.298</td>
                                <td class="on-base-pct">.365</td>
                                <td><span class="trait-tag trait-con">CON</span></td>
                                <td class="game-status">-</td>
                            </tr>
                            <tr class="player-row" draggable="true" data-player-id="l6">
                                <td class="drag-handle">‚ãÆ‚ãÆ</td>
                                <td class="player-number">6</td>
                                <td class="player-photo">üì∑</td>
                                <td class="player-name">Jugador L6</td>
                                <td>
                                    <select class="position-select" data-player="l6">
                                        <option value="P">P</option>
                                        <option value="C">C</option>
                                        <option value="1B">1B</option>
                                        <option value="2B">2B</option>
                                        <option value="3B">3B</option>
                                        <option value="SS" selected>SS</option>
                                        <option value="LF">LF</option>
                                        <option value="CF">CF</option>
                                        <option value="RF">RF</option>
                                        <option value="DH">DH</option>
                                    </select>
                                </td>
                                <td class="handedness">R</td>
                                <td class="batting-avg">.260</td>
                                <td class="on-base-pct">.315</td>
                                <td><span class="trait-tag trait-def">DEF</span></td>
                                <td class="game-status">-</td>
                            </tr>
                            <tr class="player-row" draggable="true" data-player-id="l7">
                                <td class="drag-handle">‚ãÆ‚ãÆ</td>
                                <td class="player-number">7</td>
                                <td class="player-photo">üì∑</td>
                                <td class="player-name">Jugador L7</td>
                                <td>
                                    <select class="position-select" data-player="l7">
                                        <option value="P">P</option>
                                        <option value="C">C</option>
                                        <option value="1B">1B</option>
                                        <option value="2B">2B</option>
                                        <option value="3B">3B</option>
                                        <option value="SS">SS</option>
                                        <option value="LF" selected>LF</option>
                                        <option value="CF">CF</option>
                                        <option value="RF">RF</option>
                                        <option value="DH">DH</option>
                                    </select>
                                </td>
                                <td class="handedness">L</td>
                                <td class="batting-avg">.288</td>
                                <td class="on-base-pct">.350</td>
                                <td><span class="trait-tag trait-clu">CLU</span></td>
                                <td class="game-status">-</td>
                            </tr>
                            <tr class="player-row" draggable="true" data-player-id="l8">
                                <td class="drag-handle">‚ãÆ‚ãÆ</td>
                                <td class="player-number">8</td>
                                <td class="player-photo">üì∑</td>
                                <td class="player-name">Jugador L8</td>
                                <td>
                                    <select class="position-select" data-player="l8">
                                        <option value="P">P</option>
                                        <option value="C">C</option>
                                        <option value="1B">1B</option>
                                        <option value="2B">2B</option>
                                        <option value="3B">3B</option>
                                        <option value="SS">SS</option>
                                        <option value="LF">LF</option>
                                        <option value="CF" selected>CF</option>
                                        <option value="RF">RF</option>
                                        <option value="DH">DH</option>
                                    </select>
                                </td>
                                <td class="handedness">R</td>
                                <td class="batting-avg">.302</td>
                                <td class="on-base-pct">.370</td>
                                <td><span class="trait-tag trait-spd">SPD</span></td>
                                <td class="game-status">-</td>
                            </tr>
                            <tr class="player-row" draggable="true" data-player-id="l9">
                                <td class="drag-handle">‚ãÆ‚ãÆ</td>
                                <td class="player-number">9</td>
                                <td class="player-photo">üì∑</td>
                                <td class="player-name">Jugador L9</td>
                                <td>
                                    <select class="position-select" data-player="l9">
                                        <option value="P">P</option>
                                        <option value="C">C</option>
                                        <option value="1B">1B</option>
                                        <option value="2B">2B</option>
                                        <option value="3B">3B</option>
                                        <option value="SS">SS</option>
                                        <option value="LF">LF</option>
                                        <option value="CF">CF</option>
                                        <option value="RF" selected>RF</option>
                                        <option value="DH">DH</option>
                                    </select>
                                </td>
                                <td class="handedness">R</td>
                                <td class="batting-avg">.278</td>
                                <td class="on-base-pct">.335</td>
                                <td><span class="trait-tag trait-pwr">PWR</span></td>
                                <td class="game-status">-</td>
                            </tr>
                            <tr class="player-row" draggable="true" data-player-id="l10">
                                <td class="drag-handle">‚ãÆ‚ãÆ</td>
                                <td class="player-number">10</td>
                                <td class="player-photo">üì∑</td>
                                <td class="player-name">Jugador L10</td>
                                <td>
                                    <select class="position-select" data-player="l10">
                                        <option value="P">P</option>
                                        <option value="C">C</option>
                                        <option value="1B">1B</option>
                                        <option value="2B">2B</option>
                                        <option value="3B">3B</option>
                                        <option value="SS">SS</option>
                                        <option value="LF">LF</option>
                                        <option value="CF">CF</option>
                                        <option value="RF">RF</option>
                                        <option value="DH" selected>DH</option>
                                    </select>
                                </td>
                                <td class="handedness">L</td>
                                <td class="batting-avg">.312</td>
                                <td class="on-base-pct">.385</td>
                                <td><span class="trait-tag trait-con">CON</span></td>
                                <td class="game-status">-</td>
                            </tr>
                            <tr class="player-row" draggable="true" data-player-id="l11">
                                <td class="drag-handle">‚ãÆ‚ãÆ</td>
                                <td class="player-number">11</td>
                                <td class="player-photo">üì∑</td>
                                <td class="player-name">Pitcher Alt</td>
                                <td>
                                    <select class="position-select" data-player="l11">
                                        <option value="P" selected>P</option>
                                        <option value="C">C</option>
                                        <option value="1B">1B</option>
                                        <option value="2B">2B</option>
                                        <option value="3B">3B</option>
                                        <option value="SS">SS</option>
                                        <option value="LF">LF</option>
                                        <option value="CF">CF</option>
                                        <option value="RF">RF</option>
                                        <option value="DH">DH</option>
                                    </select>
                                </td>
                                <td class="handedness">L</td>
                                <td class="batting-avg">.165</td>
                                <td class="on-base-pct">.210</td>
                                <td><span class="trait-tag trait-pit">PIT</span></td>
                                <td class="game-status">-</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Contenedor din√°mico para sistema de dados -->
                <div id="dice-container-local" class="dynamic-dice-container" style="display: none;">
                    <div class="dice-system">
                        <div class="dice-action-area">
                            <div class="current-batter-info" id="current-batter-info-local">
                                <span class="batter-name">Bateador Actual</span>
                                <span class="batter-stats">AVG: .000</span>
                            </div>
                            <div class="dice-controls">
                                <!-- Dados visuales lado a lado -->
                                <div class="dice-display">
                                    <div class="dice-item">
                                        <div class="dice-label">LANZADOR</div>
                                        <div class="dice-visual" id="pitcher-dice-local">
                                            <select class="dice-type-selector" id="pitcher-dice-type-local" onchange="updatePitcherDiceRange('local')">
                                                <option value="20">D20</option>
                                                <option value="12" selected>D12</option>
                                                <option value="8">D8</option>
                                                <option value="4">D4</option>
                                                <option value="-4">-D4</option>
                                                <option value="-8">-D8</option>
                                                <option value="-12">-D12</option>
                                                <option value="-20">-D20</option>
                                            </select>
                                            <input type="number" class="dice-value-input" id="pitcher-dice-value-local" placeholder="-" min="-20" max="20">
                                            <div class="mini-dice" onclick="rollPitcherDice('local')" title="Tirar dado del lanzador">üé≤</div>
                                        </div>
                                    </div>
                                    <div class="dice-operator">+</div>
                                    <div class="dice-item">
                                        <div class="dice-label">BATEADOR</div>
                                        <div class="dice-visual" id="batter-dice-local">
                                            <span class="dice-type">D100</span>
                                            <input type="number" class="dice-value-input" id="batter-dice-value-local" placeholder="-" min="1" max="100">
                                            <div class="mini-dice" onclick="rollBatterDice('local')" title="Tirar dado del bateador">üé≤</div>
                                        </div>
                                    </div>
                                    <div class="dice-operator">=</div>
                                    <div class="dice-item result">
                                        <div class="dice-label">RESULTADO</div>
                                        <div class="dice-visual result" id="total-result-local">
                                            <span class="dice-value" id="final-result-local">-</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="result-section">
                                    <div class="result-description" id="result-description-local">
                                        Esperando tirada...
                                    </div>

                                    <div class="result-confirmation" id="result-confirmation-local" style="display: none;">
                                        <button class="confirm-result-btn" onclick="confirmResult('local')" id="confirm-btn-local">
                                            ‚úì Confirmar Resultado
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- Modal de configuraci√≥n de equipos -->
    <div class="modal-overlay" id="team-config-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">‚öôÔ∏è Configurar Equipo</h3>
                <button class="modal-close" onclick="closeTeamConfig()">‚úï</button>
            </div>

            <div class="modal-body">
                <!-- Selector de equipos predefinidos -->
                <div class="config-section">
                    <label for="preset-teams">Equipos Predefinidos:</label>
                    <select id="preset-teams" onchange="loadPresetTeam()">
                        <option value="">Seleccionar equipo...</option>
                        <option value="yankees">New York Yankees</option>
                        <option value="dodgers">Los Angeles Dodgers</option>
                        <option value="red_sox">Boston Red Sox</option>
                        <option value="giants">San Francisco Giants</option>
                        <option value="custom">Personalizado</option>
                    </select>
                </div>

                <!-- Editor de equipo -->
                <div class="config-section">
                    <label for="team-name">Nombre del Equipo:</label>
                    <input type="text" id="team-name" placeholder="Nombre del equipo">
                </div>

                <!-- Lista de jugadores para editar -->
                <div class="config-section">
                    <h4>Jugadores del Equipo:</h4>
                    <div class="players-editor" id="players-editor">
                        <!-- Se llenar√° din√°micamente con JavaScript -->
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button class="btn-secondary" onclick="closeTeamConfig()">Cancelar</button>
                <button class="btn-primary" onclick="saveTeamConfig()">Guardar Equipo</button>
            </div>
        </div>
    </div>

    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

    <!-- Enlazamos el archivo de JavaScript personalizado -->
    <script src="script.js"></script>
</body>

</html>